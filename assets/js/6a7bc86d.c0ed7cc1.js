"use strict";(self.webpackChunkhtml=self.webpackChunkhtml||[]).push([[72],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),y=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=y(e.components);return r.createElement(c.Provider,{value:t},e.children)},l="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,u=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),l=y(n),d=a,m=l["".concat(c,".").concat(d)]||l[d]||p[d]||u;return n?r.createElement(m,o(o({ref:t},s),{},{components:n})):r.createElement(m,o({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var u=n.length,o=new Array(u);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[l]="string"==typeof e?e:a,o[1]=i;for(var y=2;y<u;y++)o[y]=n[y];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9477:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>u,metadata:()=>i,toc:()=>y});var r=n(7462),a=(n(7294),n(3905));const u={sidebar_position:2},o="Query Keys v\xe0 Query Function",i={unversionedId:"querykeys-queryfunction",id:"querykeys-queryfunction",title:"Query Keys v\xe0 Query Function",description:"Query Keys",source:"@site/docs/querykeys-queryfunction.md",sourceDirName:".",slug:"/querykeys-queryfunction",permalink:"/react-query/querykeys-queryfunction",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"T\u1ed5ng quan v\u1ec1 React Query",permalink:"/react-query/"},next:{title:"useQuery()",permalink:"/react-query/useQuery"}},c={},y=[{value:"Query Keys",id:"query-keys",level:2},{value:"Query function",id:"query-function",level:2}],s={toc:y},l="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(l,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"query-keys-v\xe0-query-function"},"Query Keys v\xe0 Query Function"),(0,a.kt)("h2",{id:"query-keys"},"Query Keys"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Query Keys"),' l\xe0 s\u1ebd "kh\xf3a" \u0111\u1ec3 react query ph\xe2n bi\u1ec7t c\xe1c lo\u1ea1i query v\u1edbi nhau.'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Query Keys")," l\xe0 m\u1ed9t m\u1ea3ng, ta c\xf3 th\u1ec3 t\u1ef1 \u0111\u1ecbnh ngh\u0129a c\xe1c ph\u1ea7n t\u1eed trong m\u1ea3ng (c\xf3 th\u1ec3 l\xe0 m\u1ed9t ",(0,a.kt)("inlineCode",{parentName:"li"},"string"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"object"),") v\xe0 react query s\u1ebd d\u1ef1a v\xe0o \u0111\xf3 \u0111\u1ec3 ph\xe2n bi\u1ec7t c\xe1c query v\u1edbi nhau."),(0,a.kt)("li",{parentName:"ul"},"V\xed d\u1ee5 \u0111\u01a1n gi\u1ea3n v\u1ec1 Query Keys:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'queryKey: ["todos"];\nqueryKey: ["users"];\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Ta c\xf3 th\u1ec3 th\xeam c\xe1c ph\u1ea7n t\u1eed v\xe0o m\u1ea3ng \u0111\u1ec3 ph\xe2n bi\u1ec7t s\xe2u h\u01a1n c\xe1c query v\u1edbi nhau:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'//Th\u1ee9 t\u1ef1 c\xe1c key trong object l\xe0 kh\xf4ng quan tr\u1ecdng, v\xed d\u1ee5 3 query sau s\u1ebd \u0111\u01b0\u1ee3c t\xednh l\xe0 c\xf9ng m\u1ed9t lo\u1ea1i\nqueryKey: ["todos", { status: "done", page }];\nqueryKey: ["todos", { page, status: "done" }];\nqueryKey: ["todos", { page, status: "done", other: undefined }];\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"//Th\u1ee9 t\u1ef1 c\xe1c ph\u1ea7n t\u1eed trong m\u1ea3ng Query Keys l\u1ea1i kh\xe1c, n\u1ebfu th\u1ee9 t\u1ef1 b\u1ecb \u0111\u1ea3o l\u1ed9n, s\u1ebd t\xednh th\xe0nh m\u1ed9t query ri\xeang bi\u1ec7t kh\xe1c\nqueryKey: ['todos', status: 'done', page]\nqueryKey: ['todos', page, status: 'done']\nqueryKey: ['todos', undefined, page, status: 'done']\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"N\u1ebfu \xedt nh\u1ea5t m\u1ed9t gi\xe1 tr\u1ecb c\u1ee7a ph\u1ea7n t\u1eed trong m\u1ea3ng ",(0,a.kt)("strong",{parentName:"p"},"Query Keys")," thay \u0111\u1ed5i th\xec s\u1ebd t\u1ea1o ra m\u1ed9t query m\u1edbi. Query c\u0169 v\u1eabn s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u trong cache ch\u1edd h\u1ebft ",(0,a.kt)("inlineCode",{parentName:"p"},"cacheTime")," m\u1edbi b\u1ecb x\xf3a kh\u1ecfi cache.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"V\xed d\u1ee5:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'useQuery({\n  queryKey: ["todos", todoId], //Gi\u1ea3 s\u1eed l\xfac n\xe0y todoId = 1\n  queryFn: () => fetchTodoById(todoId),\n});\n\n//Th\u1ef1c hi\u1ec7n thay \u0111\u1ed5i todoId = 2, query m\u1edbi s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o ra v\xe0 th\u1ef1c hi\u1ec7n vi\u1ec7c g\u1eedi \u201ccache request network\u201d \u0111\u1ec3 l\u01b0u query m\u1edbi n\xe0y v\xe0o cache. D\u1eef li\u1ec7u t\u01b0\u01a1ng \u1ee9ng v\u1edbi queryKey: [\'todos\', 1] \u1edf tr\xean v\u1eabn s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u trong cache v\xe0 l\xfac n\xe0y cacheTime \u0111\u1ebfm ng\u01b0\u1ee3c, khi h\u1ebft th\u1eddi gian cacheTime, d\u1eef li\u1ec7u \u0111\xf3 m\u1edbi b\u1ecb x\xf3a kh\u1ecfi cache\nuseQuery({\n  queryKey: ["todos", todoId], //L\xfac n\xe0y todoId = 2\n  queryFn: () => fetchTodoById(todoId),\n});\n')),(0,a.kt)("h2",{id:"query-function"},"Query function"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Query function")," l\xe0 h\xe0m th\u1ef1c hi\u1ec7n fetching data. H\xe0m n\xe0y l\xe0 h\xe0m ph\u1ea3i ",(0,a.kt)("inlineCode",{parentName:"li"},"return Promise"),"."),(0,a.kt)("li",{parentName:"ul"},"C\xfa ph\xe1p:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"queryFn: ({ queryKey, signal }) => {};\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Trong \u0111\xf3:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"queryKey"),": l\xe0 m\u1ea3ng ch\u1ee9a query keys nh\u01b0 \u0111\xe3 n\xeau \u1edf tr\xean."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"signal"),": d\xf9ng \u0111\u1ec3 h\u1ee7y b\u1ecf query."))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"M\u1ed9t s\u1ed1 v\xed d\u1ee5 v\u1ec1 Query function:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'const http = axios.create({\n  baseURL: "https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/",\n});\n\nconst getAllUsers = async () => {\n  const { data } = await http.get<User[]>("users");\n  return data;\n};\n\nconst getUserById = async (id: number) => {\n  const { data } = await http.get<User>(`users/${id}`);\n};\n\nuseQuery({ queryKey: ["users"], queryFn: getAllUsers });\n\nuseQuery({\n  queryKey: ["users", id],\n  queryFn: () => getUserById(id),\n});\n\nuseQuery({\n  queryKey: ["users", id],\n  queryFn: ({ queryKey }) => getUserById(queryKey[1]),\n});\n')))}p.isMDXComponent=!0}}]);