"use strict";(self.webpackChunkhtml=self.webpackChunkhtml||[]).push([[590],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=r.createContext({}),c=function(e){var t=r.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):u(u({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(o.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=c(n),y=i,h=p["".concat(o,".").concat(y)]||p[y]||d[y]||a;return n?r.createElement(h,u(u({ref:t},s),{},{components:n})):r.createElement(h,u({ref:t},s))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,u=new Array(a);u[0]=y;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[p]="string"==typeof e?e:i,u[1]=l;for(var c=2;c<a;c++)u[c]=n[c];return r.createElement.apply(null,u)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},3331:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>u,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var r=n(7462),i=(n(7294),n(3905));const a={sidebar_position:2},u="invalidateQueries()",l={unversionedId:"useQueryClient/invalidateQueries",id:"useQueryClient/invalidateQueries",title:"invalidateQueries()",description:"- Ph\u01b0\u01a1ng th\u1ee9c invalidateQueries() s\u1ebd refetch (g\u1eedi refetch request network) cho nh\u1eefng queries m\xe0 c\xf3 queryKey t\u01b0\u01a1ng \u1ee9ng do ta ch\u1ec9 \u0111\u1ecbnh ho\u1eb7c refetch t\u1ea5t c\u1ea3 c\xe1c queries \u0111ang c\xf3 trong cache.",source:"@site/docs/useQueryClient/invalidateQueries.md",sourceDirName:"useQueryClient",slug:"/useQueryClient/invalidateQueries",permalink:"/react-query/useQueryClient/invalidateQueries",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Gi\u1edbi thi\u1ec7u",permalink:"/react-query/useQueryClient/introduce"},next:{title:"prefetchQuery() / fetchQuery()",permalink:"/react-query/useQueryClient/prefetchQuery-fetchQuery"}},o={},c=[{value:"C\xfa ph\xe1p",id:"c\xfa-ph\xe1p",level:2},{value:"V\xed d\u1ee5",id:"v\xed-d\u1ee5",level:2}],s={toc:c},p="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"invalidatequeries"},"invalidateQueries()"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"Ph\u01b0\u01a1ng th\u1ee9c ",(0,i.kt)("inlineCode",{parentName:"li"},"invalidateQueries()")," s\u1ebd refetch (g\u1eedi ",(0,i.kt)("a",{parentName:"li",href:"../#ph%C3%A2n-bi%E1%BB%87t-hai-lo%E1%BA%A1i-request-trong-react-query"},"refetch request network"),") cho nh\u1eefng queries m\xe0 c\xf3 ",(0,i.kt)("inlineCode",{parentName:"li"},"queryKey")," t\u01b0\u01a1ng \u1ee9ng do ta ch\u1ec9 \u0111\u1ecbnh ho\u1eb7c refetch t\u1ea5t c\u1ea3 c\xe1c queries \u0111ang c\xf3 trong cache."),(0,i.kt)("li",{parentName:"ul"},"Ph\u01b0\u01a1ng n\xe0y ",(0,i.kt)("inlineCode",{parentName:"li"},"return Promise")," cho n\xean c\xf3 th\u1ec3 \u0111i k\xe8m v\u1edbi ",(0,i.kt)("inlineCode",{parentName:"li"},"await")))),(0,i.kt)("h2",{id:"c\xfa-ph\xe1p"},"C\xfa ph\xe1p"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"queryClient.invalidateQueries(filter?: QueryFilter): Promise<void>\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Xem chi ti\u1ebft QueryFilter ",(0,i.kt)("a",{parentName:"li",href:"../query-filter"},"t\u1ea1i \u0111\xe2y"))),(0,i.kt)("h2",{id:"v\xed-d\u1ee5"},"V\xed d\u1ee5"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// Refetch l\u1ea1i t\u1ea5t c\u1ea3 c\xe1c query \u0111ang c\xf3 trong cache\nqueryClient.invalidateQueries();\n// Refetch l\u1ea1i t\u1ea5t c\u1ea3 c\xe1c query m\xe0 c\xf3 ph\u1ea7n t\u1eed \u0111\u1ea7u ti\xean trong m\u1ea3ng queryKey l\xe0 'todos'\nqueryClient.invalidateQueries({ queryKey: [\"todos\"] });\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Ph\u01b0\u01a1ng th\u1ee9c ",(0,i.kt)("inlineCode",{parentName:"li"},"invalidateQueries()")," ph\xf9 h\u1ee3p khi s\u1eed d\u1ee5ng v\u1edbi ",(0,i.kt)("inlineCode",{parentName:"li"},"useMutation()"),", n\xf3 s\u1ebd t\u1ef1 \u0111\u1ed9ng c\u1eadp nh\u1eadt d\u1eef li\u1ec7u hi\u1ec3n th\u1ecb \u1edf UI ngay l\u1eadp t\u1ee9c khi mutation th\u1ef1c thi th\xe0nh c\xf4ng. V\xed d\u1ee5:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'const postTaskMutation = useMutation({\n  mutationFn: httpPost,\n});\n\nconst queryClient = useQueryClient();\n\nconst handlePostTask = () => {\n  updateTaskMutation.mutate(\n    { name: "X", deadline: new Date() },\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: ["tasks"] });\n      },\n    }\n  );\n};\n')))}d.isMDXComponent=!0}}]);