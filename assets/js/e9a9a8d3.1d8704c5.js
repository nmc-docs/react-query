"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[275],{8420:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>u,default:()=>l,frontMatter:()=>i,metadata:()=>c,toc:()=>o});var r=s(4848),t=s(8453);const i={sidebar_position:4},u="useQueries()",c={id:"useQueries",title:"useQueries()",description:"useQueries() \u0111\u1ec3 l\xe0m g\xec?",source:"@site/docs/useQueries.md",sourceDirName:".",slug:"/useQueries",permalink:"/react-query/useQueries",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Savoring the Taste of Coffee Amidst Urban Life",permalink:"/react-query/coffee-in-street"},next:{title:"useMutation()",permalink:"/react-query/useMutation"}},d={},o=[{value:"useQueries() \u0111\u1ec3 l\xe0m g\xec?",id:"usequeries-\u0111\u1ec3-l\xe0m-g\xec",level:2},{value:"C\xfa ph\xe1p",id:"c\xfa-ph\xe1p",level:2},{value:"V\xed d\u1ee5",id:"v\xed-d\u1ee5",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"usequeries",children:"useQueries()"}),"\n",(0,r.jsx)(n.h2,{id:"usequeries-\u0111\u1ec3-l\xe0m-g\xec",children:"useQueries() \u0111\u1ec3 l\xe0m g\xec?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Trong m\u1ed9t component, mu\u1ed1n s\u1eed d\u1ee5ng nhi\u1ec1u ",(0,r.jsx)(n.a,{href:"./useQuery",children:"useQuery()"})," c\xf9ng m\u1ed9t l\xfac \u0111\u1ec3 \u0111\u01b0a c\xe1c ",(0,r.jsx)(n.a,{href:"./querykeys-queryfunction#query-keys",children:"Query Keys"})," kh\xe1c nhau v\xe0o trong cache, ta d\xf9ng hook ",(0,r.jsx)(n.code,{children:"useQueries()"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"c\xfa-ph\xe1p",children:"C\xfa ph\xe1p"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { useQueries } from "@tanstack/react-query";\n\nconst myQueries = useQueries({\n  /* C\u1ea5u h\xecnh cho useQueries() */\n});\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Config"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"queries"})}),(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsxs)(n.td,{children:["L\xe0 m\u1ed9t m\u1ea3ng ch\u1ee9a c\xe1c ph\u1ea7n t\u1eed c\u1ea5u h\xecnh gi\u1ed1ng h\u1ec7t\xa0useQuery(). Xem chi ti\u1ebft\xa0",(0,r.jsx)(n.a,{href:"./useQuery#c%E1%BA%A5u-h%C3%ACnh-cho-usequery",children:"t\u1ea1i \u0111\xe2y"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"combine"})}),(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsxs)(n.td,{children:["L\xe0 m\u1ed9t h\xe0m \u0111\u1ec3 g\u1ed9p d\u1eef li\u1ec7u l\u1ea1i th\xe0nh 1 object (t\xf9y ch\u1ecdn)",(0,r.jsx)("br",{}),(0,r.jsx)(n.code,{children:"(results: UseQueriesResults) => TCombinedResult"})]})]})]})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"useQueries()"})," tr\u1ea3 v\u1ec1 m\u1ed9t m\u1ea3ng, m\u1ed7i ph\u1ea7n t\u1eed c\u1ee7a m\u1ea3ng l\xe0 m\u1ed9t object gi\u1ed1ng nh\u01b0 useQuery() tr\u1ea3 v\u1ec1. Xem chi ti\u1ebft c\xe1c thu\u1ed9c t\xednh, ph\u01b0\u01a1ng th\u1ee9c m\xe0 useQuery() tr\u1ea3 v\u1ec1 ",(0,r.jsx)(n.a,{href:"./useQuery#c%C3%A1c-thu%E1%BB%99c-t%C3%ADnh-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-tr%E1%BA%A3-v%E1%BB%81-t%E1%BB%AB-usequery",children:"t\u1ea1i \u0111\xe2y"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"v\xed-d\u1ee5",children:"V\xed d\u1ee5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const ids = [1,2,3]\nconst results = useQueries({\n  queries: ids.map(id => (\n    { queryKey: ['post', id], queryFn: () => fetchPost(id), staleTime: Infinity },\n  )),\n})\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["S\u1eed d\u1ee5ng ",(0,r.jsx)(n.code,{children:"combine"})," \u0111\u1ec3 g\u1ed9p d\u1eef li\u1ec7u l\u1ea1i th\xe0nh 1 object:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const ids = [1,2,3]\nconst combinedQueries = useQueries({\n  queries: ids.map(id => (\n    { queryKey: ['post', id], queryFn: () => fetchPost(id) },\n  )),\n  combine: (results) => {\n    return ({\n      data: results.map(result => result.data),\n      pending: results.some(result => result.isPending),\n    })\n  }\n})\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["M\u1ed9t v\xed d\u1ee5 kh\xe1c v\u1ec1 vi\u1ec7c s\u1eed d\u1ee5ng ",(0,r.jsx)(n.code,{children:"useQueries()"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import React from "react";\nimport { useQueries } from "@tanstack/react-query";\nimport axios from "axios";\n\nexport default function Example() {\n  const [postsQuery, usersQuery] = useQueries({\n    queries: [\n      {\n        queryKey: ["posts"],\n        queryFn: () =>\n          axios\n            .get("https://jsonplaceholder.typicode.com/posts")\n            .then((res) => res.data),\n      },\n\n      {\n        queryKey: ["users"],\n        queryFn: () =>\n          axios\n            .get("https://jsonplaceholder.typicode.com/users")\n            .then((res) => res.data),\n      },\n    ],\n  });\n\n  if (postsQuery.isLoading) return "Loading Posts...";\n  if (usersQuery.isLoading) return "Loading Users...";\n\n  if (postsQuery.error)\n    return "An error has occurred: " + postsQuery.error.message;\n\n  if (usersQuery.error)\n    return "An error has occurred: " + usersQuery.error.message;\n\n  return (\n    <div>\n      <h2>Posts</h2>\n      {postsQuery.data?.slice(10).map((post) => {\n        return (\n          <div key={post.id} style={{ display: "flex" }}>\n            <span>{post.id}-\xa0</span>\n            <div>{post.title}</div>\n          </div>\n        );\n      })}\n\n      <h2>Users</h2>\n      {usersQuery.data?.map((user) => {\n        return (\n          <div key={user.id} style={{ display: "flex" }}>\n            <span>{user.id}-\xa0</span>\n            <div>{user.name}</div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Trong v\xed d\u1ee5 tr\xean, ta \u0111\u1ecbnh ngh\u0129a 2 queries, ",(0,r.jsx)(n.strong,{children:"posts"})," v\xe0 ",(0,r.jsx)(n.strong,{children:"users"})]}),"\n",(0,r.jsxs)(n.li,{children:["V\u1edbi m\u1ed7i query, ta \u0111\u1ecbnh ngh\u0129a cho n\xf3 hai ",(0,r.jsx)(n.strong,{children:"queryKey"})," v\xe0 ",(0,r.jsx)(n.strong,{children:"queryFunction"})," t\u01b0\u01a1ng \u1ee9ng"]}),"\n",(0,r.jsxs)(n.li,{children:["Sau \u0111\xf3 ch\xfang ta destruct k\u1ebft qu\u1ea3 tr\u1ea3 v\u1ec1 t\u1eeb ",(0,r.jsx)(n.code,{children:"useQueries()"})," th\xf4ng qua: ",(0,r.jsx)(n.code,{children:"const [postsQuery, usersQuery]"})]}),"\n",(0,r.jsxs)(n.li,{children:["Cu\u1ed1i c\xf9ng, ch\xfang ta c\xf3 th\u1ec3 truy c\u1eadp b\u1ea5t k\u1ef3 thu\u1ed9c t\xednh n\xe0o t\u1eeb truy v\u1ea5n nh\u01b0 ",(0,r.jsx)(n.code,{children:"data"}),", ",(0,r.jsx)(n.code,{children:"error"}),",... (t\u01b0\u01a1ng t\u1ef1 nh\u01b0 c\xe1c thu\u1ed9c t\xednh \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 t\u1eeb ",(0,r.jsx)(n.code,{children:"useQuery"}),")"]}),"\n"]})})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>u,x:()=>c});var r=s(6540);const t={},i=r.createContext(t);function u(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:u(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);