"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[601],{514:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var i=t(4848),r=t(8453);const s={sidebar_position:6},c="cancelQueries()",a={id:"useQueryClient/cancelQueries",title:"cancelQueries()",description:"- Ph\u01b0\u01a1ng th\u1ee9c cancelQueries() d\xf9ng \u0111\u1ec3 h\u1ee7y b\u1ecf khi \u0111ang th\u1ef1c hi\u1ec7n d\u1edf query. \u0110\u01b0\u1ee3c d\xf9ng khi component unmounted (t\u1ee9c khi ng\u01b0\u1eddi d\xf9ng chuy\u1ec3n trang kh\xe1c trong khi query \u0111ang th\u1ef1c hi\u1ec7n d\u1edf th\xec h\u1ee7y b\u1ecf kh\xf4ng th\u1ef1c hi\u1ec7n query \u0111\xf3 n\u1eefa, gi\xfap t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng).",source:"@site/docs/useQueryClient/cancelQueries.md",sourceDirName:"useQueryClient",slug:"/useQueryClient/cancelQueries",permalink:"/react-query/useQueryClient/cancelQueries",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"setQueryData()",permalink:"/react-query/useQueryClient/setQueryData"},next:{title:"removeQueries()",permalink:"/react-query/useQueryClient/removeQueries"}},u={},o=[{value:"C\xfa ph\xe1p",id:"c\xfa-ph\xe1p",level:2},{value:"V\xed d\u1ee5",id:"v\xed-d\u1ee5",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cancelqueries",children:"cancelQueries()"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ph\u01b0\u01a1ng th\u1ee9c ",(0,i.jsx)(n.code,{children:"cancelQueries()"})," d\xf9ng \u0111\u1ec3 h\u1ee7y b\u1ecf khi \u0111ang th\u1ef1c hi\u1ec7n d\u1edf query. \u0110\u01b0\u1ee3c d\xf9ng khi component unmounted (t\u1ee9c khi ng\u01b0\u1eddi d\xf9ng chuy\u1ec3n trang kh\xe1c trong khi query \u0111ang th\u1ef1c hi\u1ec7n d\u1edf th\xec h\u1ee7y b\u1ecf kh\xf4ng th\u1ef1c hi\u1ec7n query \u0111\xf3 n\u1eefa, gi\xfap t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng)."]}),"\n",(0,i.jsxs)(n.li,{children:["Ph\u01b0\u01a1ng th\u1ee9c n\xe0y \u0111\u01b0\u1ee3c d\xf9ng ch\u1ee7 y\u1ebfu \u1edf ",(0,i.jsx)(n.strong,{children:"cleanup function"})," trong ",(0,i.jsx)(n.code,{children:"useEffect()"})]}),"\n"]})}),"\n",(0,i.jsx)(n.h2,{id:"c\xfa-ph\xe1p",children:"C\xfa ph\xe1p"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"queryClient.cancelQueries(filter?: QueryFilter): Promise<void>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Xem chi ti\u1ebft QueryFilter ",(0,i.jsx)(n.a,{href:"../query-filter",children:"t\u1ea1i \u0111\xe2y"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"v\xed-d\u1ee5",children:"V\xed d\u1ee5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { useQuery, useQueryClient } from "@tanstack/react-query";\nimport "./styles.css";\nimport axios from "axios";\nimport { useEffect } from "react";\n\ninterface Task {\n  name: string;\n}\n\nconst api = axios.create({\n  baseURL: "https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/",\n});\n\nconst getAllTasks = async (querySignal?: AbortSignal) => {\n  const { data } = await api.get<Task[]>("tasks", { signal: querySignal });\n  return data;\n};\n\nexport default function App() {\n  const queryClient = useQueryClient();\n  const { data: taskList } = useQuery({\n    queryKey: ["todos"],\n    queryFn: ({ signal }) => getAllTasks(signal),\n  });\n\n  useEffect(() => {\n    return () => {\n      queryClient.cancelQueries({ queryKey: ["todos"] });\n    };\n  }, [queryClient]);\n\n  return (\n    <div>\n      {taskList?.map((item, index) => (\n        <p key={index}>{item.name}</p>\n      ))}\n    </div>\n  );\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);