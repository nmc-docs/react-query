"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[12],{2272:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>a,frontMatter:()=>c,metadata:()=>u,toc:()=>d});var t=r(4848),s=r(8453);const c={sidebar_position:2},i="Query Keys v\xe0 Query Function",u={id:"querykeys-queryfunction",title:"Query Keys v\xe0 Query Function",description:"Query Keys",source:"@site/docs/querykeys-queryfunction.md",sourceDirName:".",slug:"/querykeys-queryfunction",permalink:"/react-query/querykeys-queryfunction",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"T\u1ed5ng quan v\u1ec1 React Query",permalink:"/react-query/"},next:{title:"useQuery()",permalink:"/react-query/useQuery"}},o={},d=[{value:"Query Keys",id:"query-keys",level:2},{value:"Query function",id:"query-function",level:2}];function y(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"query-keys-v\xe0-query-function",children:"Query Keys v\xe0 Query Function"}),"\n",(0,t.jsx)(n.h2,{id:"query-keys",children:"Query Keys"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query Keys"}),' l\xe0 s\u1ebd "kh\xf3a" \u0111\u1ec3 react query ph\xe2n bi\u1ec7t c\xe1c lo\u1ea1i query v\u1edbi nhau.']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query Keys"})," l\xe0 m\u1ed9t m\u1ea3ng, ta c\xf3 th\u1ec3 t\u1ef1 \u0111\u1ecbnh ngh\u0129a c\xe1c ph\u1ea7n t\u1eed trong m\u1ea3ng (c\xf3 th\u1ec3 l\xe0 m\u1ed9t ",(0,t.jsx)(n.code,{children:"string"}),", ",(0,t.jsx)(n.code,{children:"object"}),") v\xe0 react query s\u1ebd d\u1ef1a v\xe0o \u0111\xf3 \u0111\u1ec3 ph\xe2n bi\u1ec7t c\xe1c query v\u1edbi nhau."]}),"\n",(0,t.jsx)(n.li,{children:"V\xed d\u1ee5 \u0111\u01a1n gi\u1ea3n v\u1ec1 Query Keys:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'queryKey: ["todos"];\nqueryKey: ["users"];\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ta c\xf3 th\u1ec3 th\xeam c\xe1c ph\u1ea7n t\u1eed v\xe0o m\u1ea3ng \u0111\u1ec3 ph\xe2n bi\u1ec7t s\xe2u h\u01a1n c\xe1c query v\u1edbi nhau:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'//Th\u1ee9 t\u1ef1 c\xe1c key trong object l\xe0 kh\xf4ng quan tr\u1ecdng, v\xed d\u1ee5 3 query sau s\u1ebd \u0111\u01b0\u1ee3c t\xednh l\xe0 c\xf9ng m\u1ed9t lo\u1ea1i\nqueryKey: ["todos", { status: "done", page }];\nqueryKey: ["todos", { page, status: "done" }];\nqueryKey: ["todos", { page, status: "done", other: undefined }];\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"//Th\u1ee9 t\u1ef1 c\xe1c ph\u1ea7n t\u1eed trong m\u1ea3ng Query Keys l\u1ea1i kh\xe1c, n\u1ebfu th\u1ee9 t\u1ef1 b\u1ecb \u0111\u1ea3o l\u1ed9n, s\u1ebd t\xednh th\xe0nh m\u1ed9t query ri\xeang bi\u1ec7t kh\xe1c\nqueryKey: ['todos', status: 'done', page]\nqueryKey: ['todos', page, status: 'done']\nqueryKey: ['todos', undefined, page, status: 'done']\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["N\u1ebfu \xedt nh\u1ea5t m\u1ed9t gi\xe1 tr\u1ecb c\u1ee7a ph\u1ea7n t\u1eed trong m\u1ea3ng ",(0,t.jsx)(n.strong,{children:"Query Keys"})," thay \u0111\u1ed5i th\xec s\u1ebd t\u1ea1o ra m\u1ed9t query m\u1edbi. Query c\u0169 v\u1eabn s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u trong cache ch\u1edd h\u1ebft ",(0,t.jsx)(n.code,{children:"cacheTime"})," m\u1edbi b\u1ecb x\xf3a kh\u1ecfi cache."]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"V\xed d\u1ee5:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'useQuery({\n  queryKey: ["todos", todoId], //Gi\u1ea3 s\u1eed l\xfac n\xe0y todoId = 1\n  queryFn: () => fetchTodoById(todoId),\n});\n\n//Th\u1ef1c hi\u1ec7n thay \u0111\u1ed5i todoId = 2, query m\u1edbi s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o ra v\xe0 th\u1ef1c hi\u1ec7n vi\u1ec7c g\u1eedi \u201ccache request network\u201d \u0111\u1ec3 l\u01b0u query m\u1edbi n\xe0y v\xe0o cache. D\u1eef li\u1ec7u t\u01b0\u01a1ng \u1ee9ng v\u1edbi queryKey: [\'todos\', 1] \u1edf tr\xean v\u1eabn s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u trong cache v\xe0 l\xfac n\xe0y cacheTime \u0111\u1ebfm ng\u01b0\u1ee3c, khi h\u1ebft th\u1eddi gian cacheTime, d\u1eef li\u1ec7u \u0111\xf3 m\u1edbi b\u1ecb x\xf3a kh\u1ecfi cache\nuseQuery({\n  queryKey: ["todos", todoId], //L\xfac n\xe0y todoId = 2\n  queryFn: () => fetchTodoById(todoId),\n});\n'})}),"\n",(0,t.jsx)(n.h2,{id:"query-function",children:"Query function"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query function"})," l\xe0 h\xe0m th\u1ef1c hi\u1ec7n fetching data. H\xe0m n\xe0y l\xe0 h\xe0m ph\u1ea3i ",(0,t.jsx)(n.code,{children:"return Promise"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"C\xfa ph\xe1p:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"queryFn: ({ queryKey, signal }) => {};\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"Trong \u0111\xf3:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"queryKey"}),": l\xe0 m\u1ea3ng ch\u1ee9a query keys nh\u01b0 \u0111\xe3 n\xeau \u1edf tr\xean."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"signal"}),": d\xf9ng \u0111\u1ec3 h\u1ee7y b\u1ecf query."]}),"\n"]})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"M\u1ed9t s\u1ed1 v\xed d\u1ee5 v\u1ec1 Query function:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'const http = axios.create({\n  baseURL: "https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/",\n});\n\nconst getAllUsers = async () => {\n  const { data } = await http.get<User[]>("users");\n  return data;\n};\n\nconst getUserById = async (id: number) => {\n  const { data } = await http.get<User>(`users/${id}`);\n};\n\nuseQuery({ queryKey: ["users"], queryFn: getAllUsers });\n\nuseQuery({\n  queryKey: ["users", id],\n  queryFn: () => getUserById(id),\n});\n\nuseQuery({\n  queryKey: ["users", id],\n  queryFn: ({ queryKey }) => getUserById(queryKey[1]),\n});\n'})})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(y,{...e})}):y(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>u});var t=r(6540);const s={},c=t.createContext(s);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);